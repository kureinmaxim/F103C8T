# Урок 5: SPI + FRAM — внешняя память без "магии"

## 1) История кратко

- Встроенной Flash/RAM часто не хватает для журналов/настроек.
- Добавляют внешнюю память по SPI/I2C.
- FRAM удобна тем, что устойчива к циклам записи и не требует долгих erase-пауз как Flash.

## 2) Как реализовано у вас

- Интерфейс: `SPI1`.
- Пины:
  - `PA5` SCK
  - `PA6` MISO
  - `PA7` MOSI
  - `PA4` CS (software GPIO)

Основной драйвер: `Core/Src/fram.c`
- `fram_write_enable`
- `fram_write`
- `fram_read`
- `fram_erase_all`

## 3) Что происходит на уровне команды

Пример из `Uart1Task`:
- по команде `0x02` пишется тестовая строка в FRAM;
- затем читается обратно.

Это хороший шаблон интеграционного smoke-теста памяти.

## 4) Что улучшать дальше

1. Добавить слой "запись с заголовком":
   - тип,
   - длина,
   - CRC.
2. Ввести ring-buffer журнал событий.
3. Добавить контроль адресных границ и возврат кода ошибок.

